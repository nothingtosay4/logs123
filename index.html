<!DOCTYPE html>
<html>
<head>
    <title>VPN/IP –¢—Ä–µ–∫–µ—Ä</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 15px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        
        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            background: #4CAF50;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            display: none;
        }
        
        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }
        
        /* –¢–∞–±–ª–∏—Ü–∞ */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background: #667eea;
            color: white;
        }
        tr:hover {
            background: #f5f5f5;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ –∏ –∏–Ω–ø—É—Ç—ã */
        button, input {
            padding: 12px 15px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
        }
        input {
            border: 2px solid #ddd;
            width: 300px;
        }
        button {
            background: #667eea;
            color: white;
            cursor: pointer;
            transition: 0.3s;
        }
        button:hover {
            background: #764ba2;
        }
        .btn-copy { background: #4CAF50; }
        .btn-test { background: #FF9800; }
        .btn-delete { background: #f44336; }
        
        /* IP –∞–¥—Ä–µ—Å */
        .ip-address {
            font-family: 'Courier New', monospace;
            background: #e3f2fd;
            padding: 3px 8px;
            border-radius: 4px;
            cursor: pointer;
        }
        .ip-address:hover {
            background: #bbdefb;
        }
        
        /* VPN –º–µ—Ç–∫–∞ */
        .vpn-badge {
            background: #f44336;
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 12px;
            display: inline-block;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            input { width: 100%; margin-bottom: 10px; }
            button { width: 100%; margin: 5px 0; }
            .container { padding: 15px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ó–ê–ì–û–õ–û–í–û–ö -->
        <div style="text-align: center; margin-bottom: 30px;">
            <h1 style="color: #667eea;">üîç VPN/IP –¢–†–ï–ö–ï–†</h1>
            <p style="color: #666;">–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –ø–æ –≤–∞—à–∏–º —Å—Å—ã–ª–∫–∞–º —Å –ª—é–±–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</p>
        </div>

        <!-- –£–í–ï–î–û–ú–õ–ï–ù–ò–ï -->
        <div id="notification" class="notification"></div>

        <!-- –ì–ï–ù–ï–†–ê–¢–û–† –°–°–´–õ–û–ö -->
        <div class="card">
            <h2>üìù –°–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è</h2>
            <div style="margin: 20px 0;">
                <input type="text" id="refInput" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: vpn_test)" value="vpn_test">
                <button onclick="generateLink()">–°–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
            </div>
            
            <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
                <input type="text" id="linkOutput" style="width: calc(100% - 220px);" readonly>
                <button onclick="copyLink()" class="btn-copy">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                <button onclick="testLink()" class="btn-test">üîó –ü–µ—Ä–µ–π—Ç–∏</button>
            </div>
            
            <p style="color: #666; margin-top: 10px;">
                <strong>–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</strong> –°–æ–∑–¥–∞–π—Ç–µ —Å—Å—ã–ª–∫—É ‚Üí –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –Ω–µ–π (–∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –¥—Ä—É–≥—É) ‚Üí –î–∞–Ω–Ω—ã–µ –ø–æ—è–≤—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ –Ω–∏–∂–µ
            </p>
        </div>

        <!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
        <div id="stats" style="display: flex; flex-wrap: wrap; gap: 15px; margin: 20px 0;">
            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
        </div>

        <!-- –ò–°–¢–û–†–ò–Ø –ü–ï–†–ï–•–û–î–û–í -->
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h2>üìä –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤</h2>
                <div>
                    <button onclick="refreshLogs()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                    <button onclick="clearLogs()" class="btn-delete">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
                </div>
            </div>
            
            <div id="logsTable">
                <!-- –¢–∞–±–ª–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                <p style="text-align: center; padding: 40px; color: #999;">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
            </div>
        </div>

        <!-- –ò–ù–°–¢–†–£–ö–¶–ò–Ø -->
        <div class="card">
            <h2>üìñ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h2>
            <ol style="margin-left: 20px; line-height: 1.8; color: #555;">
                <li><strong>–°–æ–∑–¥–∞–π—Ç–µ —Å—Å—ã–ª–∫—É</strong> —Å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –º–µ—Ç–∫–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–º–æ–π_–≤–ø–Ω")</li>
                <li><strong>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —ç—Ç–æ–π —Å—Å—ã–ª–∫–µ</strong> —Å –¥—Ä—É–≥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏–ª–∏ —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º VPN</li>
                <li><strong>–°–∏—Å—Ç–µ–º–∞ —Å–æ–±–µ—Ä–µ—Ç –¥–∞–Ω–Ω—ã–µ</strong>: IP-–∞–¥—Ä–µ—Å, –±—Ä–∞—É–∑–µ—Ä, –ø—Ä–∏–º–µ—Ä–Ω–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</li>
                <li><strong>–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ</strong> (localStorage)</li>
                <li><strong>–í—ã —É–≤–∏–¥–∏—Ç–µ –≤—Å–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –≤ —Ç–∞–±–ª–∏—Ü–µ</strong> –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ</li>
                <li><strong>–î–ª—è —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –º–µ—Ç–∫–∏</strong>: "—Ä–∞–±–æ—Ç–∞", "–¥–æ–º", "vpn_—Ç–µ—Å—Ç", "–º–æ–±–∏–ª—å–Ω—ã–π"</li>
            </ol>
        </div>

        <!-- –ü–û–î–í–ê–õ -->
        <div style="text-align: center; margin-top: 40px; color: #999; font-size: 14px;">
            <p>‚ö†Ô∏è –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ. –ü—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –∫—ç—à–∞ –æ–Ω–∏ —É–¥–∞–ª—è—Ç—Å—è.</p>
            <p>üîí –î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç (–∫–Ω–æ–ø–∫–∞ –Ω–∏–∂–µ).</p>
            <button onclick="exportLogs()" style="background: #9C27B0; margin-top: 10px;">üì• –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (JSON)</button>
        </div>
    </div>

    <script>
        // ===================== –ü–ï–†–ï–ú–ï–ù–ù–´–ï =====================
        let logs = JSON.parse(localStorage.getItem('vpntracker_logs') || '[]');
        const API_KEY = '5a13ac18f7msh87d3311a2909f5ep15135bjsn7d5e3b5c5f1f'; // –ü—Ä–∏–º–µ—Ä –∫–ª—é—á–∞ (–Ω—É–∂–µ–Ω —Ä–µ–∞–ª—å–Ω—ã–π)
        
        // ===================== –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò =====================
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            generateLink();
            loadStats();
            loadLogsTable();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä ref –≤ URL (–∑–Ω–∞—á–∏—Ç, –±—ã–ª –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–µ)
            const urlParams = new URLSearchParams(window.location.search);
            const ref = urlParams.get('ref');
            
            if (ref && !urlParams.get('tracked')) {
                // –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∫—É "tracked" –≤ URL, —á—Ç–æ–±—ã –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ
                urlParams.set('tracked', 'true');
                window.history.replaceState({}, '', `${location.pathname}?${urlParams}`);
                
                // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –ø–µ—Ä–µ—Ö–æ–¥
                recordVisit(ref);
            }
            
            // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
            setInterval(loadLogsTable, 10000);
        });
        
        // –ó–∞–ø–∏—Å—å –ø–µ—Ä–µ—Ö–æ–¥–∞
        async function recordVisit(ref) {
            try {
                showNotification('üîÑ –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ –≤–∞—à–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏...', 'info');
                
                // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ
                const visit = {
                    id: Date.now(),
                    timestamp: new Date().toLocaleString('ru-RU'),
                    ref: ref,
                    userAgent: navigator.userAgent,
                    screen: `${screen.width}x${screen.height}`,
                    language: navigator.language,
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                    cookiesEnabled: navigator.cookieEnabled
                };
                
                // –ü–æ–ª—É—á–∞–µ–º IP —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å
                const ipData = await fetch('https://api.ipify.org?format=json')
                    .then(res => res.json())
                    .catch(() => ({ ip: '–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å' }));
                
                visit.ip = ipData.ip;
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–æ IP
                if (visit.ip && visit.ip !== '–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å') {
                    try {
                        const geoData = await fetch(`https://ipapi.co/${visit.ip}/json/`)
                            .then(res => res.json());
                        
                        visit.location = {
                            country: geoData.country_name || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
                            city: geoData.city || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
                            provider: geoData.org || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
                            isVpn: geoData.org?.toLowerCase().includes('vpn') || 
                                   geoData.org?.toLowerCase().includes('proxy') ||
                                   false
                        };
                    } catch (e) {
                        visit.location = { error: '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –≥–µ–æ–¥–∞–Ω–Ω—ã–µ' };
                    }
                }
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
                if (/Android/.test(navigator.userAgent)) {
                    visit.device = 'üì± Android';
                } else if (/iPhone|iPad|iPod/.test(navigator.userAgent)) {
                    visit.device = 'üì± iOS';
                } else if (/Windows/.test(navigator.userAgent)) {
                    visit.device = 'üíª Windows';
                } else if (/Mac/.test(navigator.userAgent)) {
                    visit.device = 'üçé MacOS';
                } else if (/Linux/.test(navigator.userAgent)) {
                    visit.device = 'üêß Linux';
                } else {
                    visit.device = 'üñ•Ô∏è –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
                }
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –±—Ä–∞—É–∑–µ—Ä
                if (/Chrome/.test(navigator.userAgent) && !/Edg/.test(navigator.userAgent)) {
                    visit.browser = 'Chrome';
                } else if (/Firefox/.test(navigator.userAgent)) {
                    visit.browser = 'Firefox';
                } else if (/Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent)) {
                    visit.browser = 'Safari';
                } else if (/Edg/.test(navigator.userAgent)) {
                    visit.browser = 'Edge';
                } else {
                    visit.browser = '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
                logs.unshift(visit); // –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ
                if (logs.length > 100) logs = logs.slice(0, 100); // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º 100 –∑–∞–ø–∏—Å–µ–π
                localStorage.setItem('vpntracker_logs', JSON.stringify(logs));
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                loadStats();
                loadLogsTable();
                
                showNotification(`‚úÖ –ó–∞–ø–∏—Å–∞–Ω –ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç ${visit.ip || '–≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞'}`, 'success');
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏:', error);
                showNotification('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø–∏—Å–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, –Ω–æ –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞', 'warning');
            }
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function loadStats() {
            const statsDiv = document.getElementById('stats');
            if (!statsDiv) return;
            
            const uniqueIPs = [...new Set(logs.map(log => log.ip))].filter(ip => ip && ip !== '–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å');
            const vpnCount = logs.filter(log => log.location?.isVpn).length;
            
            statsDiv.innerHTML = `
                <div style="flex: 1; min-width: 200px; background: #4CAF50; color: white; padding: 20px; border-radius: 10px;">
                    <h3 style="font-size: 24px; margin-bottom: 5px;">${logs.length}</h3>
                    <p>–í—Å–µ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤</p>
                </div>
                <div style="flex: 1; min-width: 200px; background: #FF9800; color: white; padding: 20px; border-radius: 10px;">
                    <h3 style="font-size: 24px; margin-bottom: 5px;">${uniqueIPs.length}</h3>
                    <p>–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö IP</p>
                </div>
                <div style="flex: 1; min-width: 200px; background: #f44336; color: white; padding: 20px; border-radius: 10px;">
                    <h3 style="font-size: 24px; margin-bottom: 5px;">${vpnCount}</h3>
                    <p>–ü–æ–¥–æ–∑—Ä–µ–Ω–∏–µ –Ω–∞ VPN</p>
                </div>
                <div style="flex: 1; min-width: 200px; background: #9C27B0; color: white; padding: 20px; border-radius: 10px;">
                    <h3 style="font-size: 24px; margin-bottom: 5px;">${logs.length > 0 ? new Date(logs[0].timestamp).toLocaleTimeString() : '--:--'}</h3>
                    <p>–ü–æ—Å–ª–µ–¥–Ω–∏–π –ø–µ—Ä–µ—Ö–æ–¥</p>
                </div>
            `;
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –ª–æ–≥–æ–≤
        function loadLogsTable() {
            const tableDiv = document.getElementById('logsTable');
            if (!tableDiv) return;
            
            if (logs.length === 0) {
                tableDiv.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #999;">
                        <p style="font-size: 18px; margin-bottom: 10px;">üì≠ –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</p>
                        <p>–°–æ–∑–¥–∞–π—Ç–µ —Å—Å—ã–ª–∫—É –≤—ã—à–µ –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –Ω–µ–π</p>
                    </div>
                `;
                return;
            }
            
            let tableHTML = `
                <div style="overflow-x: auto;">
                    <table>
                        <thead>
                            <tr>
                                <th>–í—Ä–µ–º—è</th>
                                <th>IP –∞–¥—Ä–µ—Å</th>
                                <th>–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è</th>
                                <th>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</th>
                                <th>–ú–µ—Ç–∫–∞</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            logs.forEach(log => {
                tableHTML += `
                    <tr>
                        <td>${log.timestamp}</td>
                        <td>
                            <span class="ip-address" onclick="copyToClipboard('${log.ip}')" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å IP">
                                ${log.ip || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}
                            </span>
                        </td>
                        <td>
                            ${log.location?.country || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}
                            ${log.location?.city ? ', ' + log.location.city : ''}
                            ${log.location?.isVpn ? '<br><small style="color:#f44336;">–í–æ–∑–º–æ–∂–Ω–æ VPN/–ü—Ä–æ–∫—Å–∏</small>' : ''}
                        </td>
                        <td>
                            <strong>${log.device || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</strong><br>
                            <small>${log.browser || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</small>
                        </td>
                        <td><strong style="color: #667eea;">${log.ref}</strong></td>
                        <td>
                            ${log.location?.isVpn ? '<span class="vpn-badge">VPN</span>' : '<span style="color:#4CAF50;">–û–±—ã—á–Ω—ã–π</span>'}
                        </td>
                    </tr>
                `;
            });
            
            tableHTML += `
                        </tbody>
                    </table>
                </div>
            `;
            
            tableDiv.innerHTML = tableHTML;
        }
        
        // ===================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò =====================
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            if (!notification) return;
            
            notification.textContent = message;
            notification.style.display = 'block';
            notification.style.background = type === 'success' ? '#4CAF50' : 
                                           type === 'warning' ? '#FF9800' : 
                                           type === 'error' ? '#f44336' : '#2196F3';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 5000);
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏
        function generateLink() {
            const ref = document.getElementById('refInput').value.trim() || 'vpn_test';
            const currentUrl = window.location.origin + window.location.pathname;
            const link = `${currentUrl}?ref=${encodeURIComponent(ref)}`;
            document.getElementById('linkOutput').value = link;
        }
        
        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏
        function copyLink() {
            const linkInput = document.getElementById('linkOutput');
            linkInput.select();
            navigator.clipboard.writeText(linkInput.value);
            showNotification('‚úÖ –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!', 'success');
        }
        
        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text);
            showNotification(`‚úÖ IP –∞–¥—Ä–µ—Å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω: ${text}`, 'success');
        }
        
        // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏
        function testLink() {
            const link = document.getElementById('linkOutput').value;
            window.open(link, '_blank');
            showNotification('üîó –û—Ç–∫—Ä—ã–≤–∞—é —Å—Å—ã–ª–∫—É –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ...', 'info');
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–æ–≤
        function refreshLogs() {
            loadLogsTable();
            loadStats();
            showNotification('üîÑ –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã', 'info');
        }
        
        // –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤
        function clearLogs() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
                logs = [];
                localStorage.removeItem('vpntracker_logs');
                loadStats();
                loadLogsTable();
                showNotification('üóëÔ∏è –í—Å–µ –∑–∞–ø–∏—Å–∏ —É–¥–∞–ª–µ–Ω—ã', 'success');
            }
        }
        
        // –≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤
        function exportLogs() {
            const dataStr = JSON.stringify(logs, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `vpntracker_logs_${new Date().toISOString().slice(0,10)}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('üì• –î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ JSON —Ñ–∞–π–ª', 'success');
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª—É—à–∞—Ç–µ–ª–µ–π —Å–æ–±—ã—Ç–∏–π
        document.getElementById('refInput').addEventListener('input', generateLink);
    </script>
</body>
</html>
